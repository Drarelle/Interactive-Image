/* Copyright (c) 2014 Halász Ádám mail@adamhalasz.com https://github.com/adamhalasz/uniqid */

/**
 * Interactive Image jQuery plugin BETA
 *
 * @author Jean-Philippe Chateau <contact@jpchateau.com>
 * @version 0.5.0
 * @license MIT https://github.com/jpchateau/Interactive-Image/blob/master/LICENSE
 */

define("helper/log",[],function(){"use strict";var e=function(e){this.settings=e};return e.prototype.debug=function(e){window.console&&window.console.log&&!0===this.settings.debug&&window.console.log(e)},function(t){return new e(t)}}),define("event/hover",[],function(){"use strict";return{bindEvents:function(e){e.on("mouseenter.interactiveImage",function(){var e=$(this).find(".icon-button");$.each(e,function(){$(this).css("display")!=="block"&&$(this).show()})}),e.on("mouseleave.interactiveImage",function(){var e=$(this).find(".icon-button");$.each(e,function(){$(this).css("display")==="block"&&$(this).hide()})});var t=function(){e.on("mouseleave.interactiveImage",".icon-button",function(){var e=$('div[data-id="'+$(this).attr("data-for")+'"]');e.css("display")==="block"&&e.hide()})},n=function(){e.off("mouseleave.interactiveImage",".icon-button")};e.on("mouseenter.interactiveImage",".icon-button",function(){var e=$('div[data-id="'+$(this).attr("data-for")+'"]');e.css("display")!=="block"&&(e.show(),e.on("mouseenter.interactiveImage",function(){n()}),e.on("mouseleave.interactiveImage",function(){$(this).hide(),t()}))}),t()}}}),define("helper/dom",[],function(){"use strict";return{createDomElement:function(e,t){var n=document.createElement(e);return n.setAttribute("class",t),n}}}),define("helper/uniquid",[],function(){"use strict";var e=(new Date).getTime();while(e===(new Date).getTime());return function(){return(new Date).getTime().toString(36)}}),define("element/base",["helper/dom","helper/uniquid"],function(e,t){"use strict";var n=function(e){this.position=e.position,this.backgroundColor=e.backgroundColor,this.fontColor=e.fontColor,this.title=e.title,this.identifier=t()};return n.prototype.createIcon=function(){var t=e.createDomElement("div","icon-button icon-radio-checked");return t.setAttribute("data-for",this.identifier),t.style.top=this.position.top+"px",t.style.left=this.position.left+"px",t},n.prototype.createTitle=function(){var t=e.createDomElement("span","title");return t.appendChild(document.createTextNode(this.title)),t},n.prototype.renderHtml=function(){throw"Error: render method not implemented"},function(e){var t,r=["position","backgroundColor","fontColor","title"];for(t in r)if("undefined"==typeof e[r[t]]||null===e[r[t]]||""===e[r[t]])throw'Error: missing required parameter "'+r[t]+'" in BaseItem';return new n(e)}}),define("element/text",["element/base","helper/dom"],function(e,t){"use strict";var n=function(n){var r=e(n);return r.description=n.description,r.picture=n.picture,r.link=n.link,r.createDescription=function(){var e=t.createDomElement("p","description");return e.appendChild(document.createTextNode(this.description)),e},r.createPicture=function(){var e=t.createDomElement("img","picture");return e.src=this.picture,e},r.createLink=function(){var e,t=document.createElement("a");return t.href=this.link.href,t.style.color=this.fontColor,"undefined"!==this.link.label?e=this.link.label:e=this.link.href,t.appendChild(document.createTextNode(e)),t},r.renderHtml=function(){var e=t.createDomElement("div","container");return e.setAttribute("data-id",this.identifier),e.style.color=this.fontColor,e.style.backgroundColor=this.backgroundColor,e.style.left=this.position.left-60+"px",e.style.top=this.position.top+43+"px",e.appendChild(this.createTitle()),e.appendChild(this.createDescription()),"undefined"!=typeof this.picture&&e.appendChild(this.createPicture()),"undefined"!=typeof this.link&&e.appendChild(this.createLink()),e},r};return function(e){var t,r=["position","backgroundColor","fontColor","title","description"];for(t in r)if("undefined"==typeof e[r[t]]||null===e[r[t]]||""===e[r[t]])throw'Error: missing required parameter "'+r[t]+'" in TextItem';return new n(e)}}),define("app",["helper/log","event/hover","element/text"],function(e,t,n){"use strict";return $.interactiveImage=function(r,i,s){var o=e(i),u=function(){if("undefined"==typeof i.debug||"boolean"!=typeof i.debug)throw i.debug=!0,'Error: check "debug" plugin option';if("undefined"==typeof i.fontColor||"string"!=typeof i.fontColor)throw'Error: check "fontColor" plugin option';if("undefined"==typeof i.backgroundColor||"string"!=typeof i.backgroundColor)throw'Error: check "backgroundColor" plugin option';o.debug("Settings checked")},a={fontColor:i.fontColor,backgroundColor:i.backgroundColor},f=function(e){e=$.extend({},a,e),o.debug("Options:"),o.debug(e);var t={position:e.position,backgroundColor:e.backgroundColor,fontColor:e.fontColor,title:e.title,description:e.description,picture:e.picture,link:e.link},r=n(t);return o.debug("Item "+r.title+" created"),s.append(r.createIcon()),$(r.renderHtml())},l=function(){var e;for(e in r)r.hasOwnProperty(e)&&s.append(f(r[e]))};try{u(),l(),t.bindEvents(s)}catch(c){o.debug(c)}},function(e,t,n){$.interactiveImage(e,t,n)}}),requirejs(["app"],function(e){"use strict";$.fn.interactiveImage=function(t,n){var r={debug:!1,fontColor:"#000000",backgroundColor:"#FFFFFF"};return n=$.extend({},r,n),this.each(function(){e(t,n,$(this))})}}),define("main",function(){});